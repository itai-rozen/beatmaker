(this.webpackJsonpbeatmaker=this.webpackJsonpbeatmaker||[]).push([[0],[,,,,,,,function(e,t,n){e.exports=n.p+"static/media/all-instruments.3f94a69e.mp3"},function(e,t,n){e.exports=n(25)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(5),l=n.n(r),o=(n(13),n(3)),u=n(2),i=n(1),s=c.a.createContext(),m=s.Provider,d=s.Consumer,f=n(6),v=n(7),p=n.n(v);n(14),n(15),n(16),n(17);var E=function(e){return c.a.createElement(d,null,(function(t){return c.a.createElement("li",{className:"beat "+t.actions.assignColor(e.idx)})}))};var b=function(){return c.a.createElement(d,null,(function(e){return c.a.createElement("div",{className:"beat-bar"},c.a.createElement("ul",{className:"beat-list"},e.beatCpts.map((function(e,t){return c.a.createElement(E,{key:"beat"+t,idx:t})}))))}))};n(18);var h=function(){return c.a.createElement(d,null,(function(e){return c.a.createElement("div",{className:"control-panel"},c.a.createElement("button",{className:"load-btn",onClick:function(){return e.actions.toggleLoadModal()}},"\ud83d\udcc1"),c.a.createElement("button",{className:"save-btn",onClick:function(){return e.actions.toggleSaveModal()}},"\ud83d\udcbe"),c.a.createElement("button",{onClick:function(){return e.actions.startPlaying()}},"\u25b6"),c.a.createElement("button",{onClick:function(){return e.actions.stopPlaying()}},"\u25a0"),c.a.createElement("button",{onClick:function(){return e.actions.pausePlaying()}},"\u275a\u275a"),c.a.createElement("button",{onClick:function(){return e.actions.resetPlaying()}},"Reset"),c.a.createElement("button",{onClick:function(){return e.actions.clearInstrument()}},"Clear"),c.a.createElement("div",{className:"sliders"},c.a.createElement("div",{className:"slider"},c.a.createElement("div",{className:"bpm rotate-back"},"BPM"),c.a.createElement("div",{className:"current-tempo rotate-back"},e.tempo),c.a.createElement("input",{defaultValue:e.tempo,type:"range",onMouseUp:function(){return e.actions.playUpdateTempo()},onTouchEnd:function(){return e.actions.playUpdateTempo()},onChange:function(t){return e.actions.handleTempo(t)},id:"tempo-slider",min:"30",max:"180"})),c.a.createElement("div",{className:"slider"},c.a.createElement("div",{className:"mute hidden"}),c.a.createElement("div",{className:"rotate-back",id:"volume-icon"},"\ud83d\udd0a"),c.a.createElement("input",{defaultValue:e.volume,type:"range",onChange:function(t){return e.actions.handleVolume(t)},step:"0.01",id:"volume-slider",min:"0",max:"1"}))))}))};n(19);var j=function(){return c.a.createElement("h1",{className:"header"},"Beat Maker")};n(20);var k=function(){return c.a.createElement(d,null,(function(e){return c.a.createElement("div",{className:"nav"},e.instruments.map((function(t,n){return c.a.createElement("div",{key:n+"i",className:"instrument"},c.a.createElement("input",{className:t.name,id:"rad"+n,type:"radio",checked:t.checked,onChange:function(){return e.actions.checkInstrument(t.name)},name:"rad"+n}),c.a.createElement("label",{htmlFor:"rad"+n},t.name.toUpperCase()))})))}))};n(21);var N=function(){return c.a.createElement("div",{className:"load window"},c.a.createElement("h1",{className:"load-header"},"Load Preset"),c.a.createElement("div",{className:"load-headers"},c.a.createElement("span",null,"Composer"),c.a.createElement("span",null,"Title")),c.a.createElement(d,null,(function(e){return c.a.createElement("ul",{className:"preset-list"},e.initialState&&e.initialState.map((function(t,n){return c.a.createElement("li",{key:n+"state",onClick:function(){return e.actions.loadSounds(t.sounds,t.tempo)}},c.a.createElement("p",null,t.composerName),c.a.createElement("p",null,t.title))}))||c.a.createElement("p",null,"no saved compositions :( "))})))};n(22);var O=function(){return c.a.createElement("div",{className:"save window"},c.a.createElement("h1",null," Save Preset"),c.a.createElement("form",{className:"save-form",action:"/api",method:"POST"},c.a.createElement("div",{className:"input-container"},c.a.createElement("label",{htmlFor:"composerName",className:"input-label"}," Name: \xa0"),c.a.createElement("input",{className:"save-input name",type:"text",id:"composerName",name:"composerName",required:!0})),c.a.createElement("br",null),c.a.createElement("div",{className:"input-container"},c.a.createElement("label",{className:"input-label",htmlFor:"title"},"Title: \xa0"),c.a.createElement("input",{className:"save-input title",type:"text",id:"title",name:"title",required:!0})),c.a.createElement(d,null,(function(e){return c.a.createElement("span",null,c.a.createElement("input",{id:"sounds",name:"sounds",value:JSON.stringify(e.sounds),type:"hidden"}),c.a.createElement("input",{type:"hidden",id:"savedTempo",name:"tempo",value:e.tempo}),c.a.createElement("br",null),c.a.createElement("div",{className:"btn-container"},c.a.createElement("button",{className:"form-save-btn",onClick:function(){alert("saved!"),e.actions.toggleSaveModal()}},"Save")))}))))};n(23),n(24);var g=function(e){return c.a.createElement(d,null,(function(t){return c.a.createElement("li",{className:"sound "+t.actions.assignSoundClass(e.i,e.j,e.instrument)+" ".concat(e.instrument),onClick:function(){return t.actions.handleClickedSound(e.i,e.j,e.instrument)}})}))};var S=function(e){return c.a.createElement("div",{className:"sound-board"},c.a.createElement(d,null,(function(t){return t.sounds.map((function(t,n){return c.a.createElement("ul",{key:"row "+n,className:"sound-list"}," ",t.map((function(t,n){return c.a.createElement(g,{key:"sound "+n,i:t.i,j:t.j,scale:t.scale,instrument:e.instrument})}))," ")}))})))};var y=function(){return c.a.createElement("div",{className:"main"},c.a.createElement(j,null),c.a.createElement(k,null),c.a.createElement(b,null),c.a.createElement(d,null,(function(e){return c.a.createElement("div",{className:"sound-board"},c.a.createElement(S,{instrument:e.instruments.filter((function(e){return e.checked}))[0].name}),c.a.createElement("div",{className:e.isShowSave?"save-modal":"save-modal hide"},c.a.createElement(O,null)),c.a.createElement("div",{className:e.isShowLoad?"load-modal":"load-modal hide"},c.a.createElement(N,null)))})),c.a.createElement(h,null))};var C=function(){var e=["C2","D2","E2","G2","C3","D3","E3","G3","C4","D4","E4"],t=function(){for(var e=[],t=0;t<16;t++)e.push(t);return e}(),n=function(){for(var t=[],n=0;n<e.length;n++){t.push([]);for(var a=0;a<16;a++)t[n].push({i:n,j:a,scale:e[n],activeInstruments:{}})}return t},r=Object(a.useState)(n()),l=Object(i.a)(r,2),s=l[0],d=l[1],v=Object(a.useState)([]),E=Object(i.a)(v,2),b=E[0],h=E[1],j=Object(a.useState)(-1),k=Object(i.a)(j,2),N=k[0],O=k[1],g=Object(a.useState)([]),S=Object(i.a)(g,2),C=S[0],I=S[1],w=Object(a.useState)([{name:"saxophone",checked:!0},{name:"cello",checked:!1},{name:"oboe",checked:!1},{name:"vocal",checked:!1},{name:"guitar",checked:!1},{name:"kora",checked:!1},{name:"vibraphone",checked:!1},{name:"drums",checked:!1},{name:"violin",checked:!1}]),P=Object(i.a)(w,2),x=P[0],T=P[1],M=Object(a.useState)(!1),B=Object(i.a)(M,2),L=B[0],U=B[1],J=Object(a.useState)(!1),V=Object(i.a)(J,2),D=V[0],F=V[1],q=Object(a.useState)(!1),G=Object(i.a)(q,2),R=G[0],W=G[1],A=Object(a.useState)(!1),$=Object(i.a)(A,2),z=$[0],H=$[1],K=Object(a.useState)(1e3),Q=Object(i.a)(K,2),X=Q[0],Y=Q[1],Z=Object(a.useState)(60),_=Object(i.a)(Z,2),ee=_[0],te=_[1],ne=Object(a.useState)(.75),ae=Object(i.a)(ne,2),ce=ae[0],re=ae[1],le=Object(f.a)(p.a,{volume:ce,sprite:function(){var t=-1e3,n={};return x.forEach((function(a){e.forEach((function(e){n[a.name+e]=[t+=1e3,1e3]}))})),n}(),interrupt:!1}),oe=Object(i.a)(le,1)[0];Object(a.useEffect)((function(){var e=[];s.forEach((function(t){return t.forEach((function(t){for(var n in t.activeInstruments)t.activeInstruments[n]&&e.push(t)}))})),h(e),console.log("initial state: ",C),console.log("active sounds @ useeffect: ",b),R&&b.filter((function(e){return e.j===N})).forEach((function(e){for(var t in e.activeInstruments)!0===e.activeInstruments[t]&&oe({id:t+e.scale})}))}),[N,R,D,L]);var ue=Object(a.useRef)(null),ie=function(){fetch("/api").then((function(e){if(e.ok)return e.json()})).then((function(e){I(e)})).catch((function(e){return console.error(e)})),F(!D),D&&U(!1)};return c.a.createElement(m,{value:{beatCpts:t,delay:X,initialState:C,instruments:x,isShowLoad:D,isShowSave:L,tempo:ee,sounds:s,redBeatIndex:N,volume:ce,actions:{assignColor:function(e){if(R||z)return e===N?"red":""},checkInstrument:function(e){T(x.map((function(t){return t.name===e?Object(u.a)(Object(u.a)({},t),{},{checked:!0}):Object(u.a)(Object(u.a)({},t),{},{checked:!1})})))},clearInstrument:function(){var e=x.filter((function(e){return e.checked}))[0].name;d(s.map((function(t){return t.map((function(t){return t.activeInstruments[e]?Object(u.a)(Object(u.a)({},t),{},{activeInstruments:Object(u.a)(Object(u.a)({},t.activeInstruments),{},Object(o.a)({},e,!1))}):t}))})))},handleClickedSound:function(e,t,n){d(s.map((function(a){return a.map((function(a){return a.i===e&&a.j===t?Object(u.a)(Object(u.a)({},a),{},{activeInstruments:Object(u.a)(Object(u.a)({},a.activeInstruments),{},Object(o.a)({},n,!a.activeInstruments[n]))}):a}))})))},handleTempo:function(e){var t=e.target.value;te(t),Y(60/t*1e3)},handleVolume:function(e){R&&re(e.target.value)},loadSounds:function(e,t){var n=JSON.parse(e);d(n),te(t),Y(60/t*1e3),ie()},startPlaying:function(){R||(W(!0),H(!1),ue.current=setInterval((function(){O((function(e){return 15===e?0:e+1}))}),X))},stopPlaying:function(){clearInterval(ue.current),W(!1),H(!1),O(-1)},toggleLoadModal:ie,toggleSaveModal:function(){fetch("/api").then((function(e){if(e.ok)return e.json()})).then((function(e){I(e)})).catch((function(e){return console.error(e)})),U(!L),L&&F(!1)},pausePlaying:function(){R&&(clearInterval(ue.current),W(!1),H(!0))},playUpdateTempo:function(){R&&(clearInterval(ue.current),ue.current=setInterval((function(){O((function(e){return 15===e?0:e+1}))}),X))},resetPlaying:function(){clearInterval(ue.current),W(!1),H(!1),O(-1),Y(1e3),te(60),document.getElementById("tempo-slider").value=60,document.getElementById("volume-slider").value=.75,re(.75),d(n()),h([])},assignSoundClass:function(e,t,n){return!0===s[e][t].activeInstruments[n]?"active":""}}}},c.a.createElement("div",{className:"App"},c.a.createElement(y,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.8fb1828e.chunk.js.map